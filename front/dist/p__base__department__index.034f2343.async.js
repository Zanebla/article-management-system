"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[787],{82061:function(K,_,e){var m=e(1413),r=e(67294),g=e(47046),u=e(98615),f=function(y,o){return r.createElement(u.Z,(0,m.Z)((0,m.Z)({},y),{},{ref:o,icon:g.Z}))};f.displayName="DeleteOutlined",_.Z=r.forwardRef(f)},51042:function(K,_,e){var m=e(1413),r=e(67294),g=e(42110),u=e(98615),f=function(y,o){return r.createElement(u.Z,(0,m.Z)((0,m.Z)({},y),{},{ref:o,icon:g.Z}))};f.displayName="PlusOutlined",_.Z=r.forwardRef(f)},5966:function(K,_,e){var m=e(1413),r=e(91),g=e(67294),u=e(49254),f=e(85893),T=["fieldProps","proFieldProps"],y=["fieldProps","proFieldProps"],o="text",v=function(d){var j=d.fieldProps,O=d.proFieldProps,Z=(0,r.Z)(d,T);return(0,f.jsx)(u.Z,(0,m.Z)({valueType:o,fieldProps:j,filedConfig:{valueType:o},proFieldProps:O},Z))},h=function(d){var j=d.fieldProps,O=d.proFieldProps,Z=(0,r.Z)(d,y);return(0,f.jsx)(u.Z,(0,m.Z)({valueType:"password",fieldProps:j,proFieldProps:O,filedConfig:{valueType:o}},Z))},l=v;l.Password=h,l.displayName="ProFormComponent",_.Z=l},74659:function(K,_,e){e.r(_),e.d(_,{default:function(){return ae}});var m=e(17061),r=e.n(m),g=e(17156),u=e.n(g),f=e(27424),T=e.n(f),y=e(42122),o=e.n(y),v=e(78158);function h(n,a){return l.apply(this,arguments)}function l(){return l=u()(r()().mark(function n(a,i){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/api/department/addDepartment",o()({method:"POST",headers:{"Content-Type":"application/json"},data:a},i||{})));case 1:case"end":return t.stop()}},n)})),l.apply(this,arguments)}function I(n,a){return d.apply(this,arguments)}function d(){return d=u()(r()().mark(function n(a,i){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/api/department/deleteDepartment",o()({method:"POST",headers:{"Content-Type":"application/json"},data:a},i||{})));case 1:case"end":return t.stop()}},n)})),d.apply(this,arguments)}function j(n,a){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,i){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/department/fullSearch",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},i||{})));case 1:case"end":return t.stop()}},n)})),O.apply(this,arguments)}function Z(n){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function n(a){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/department/getDepartmentByCode",_objectSpread({method:"POST"},a||{})));case 1:case"end":return s.stop()}},n)})),p.apply(this,arguments)}function V(n,a){return $.apply(this,arguments)}function $(){return $=u()(r()().mark(function n(a,i){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/api/department/listDepartment",o()({method:"POST",headers:{"Content-Type":"application/json"},data:a},i||{})));case 1:case"end":return t.stop()}},n)})),$.apply(this,arguments)}function Q(n,a){return z.apply(this,arguments)}function z(){return z=u()(r()().mark(function n(a,i){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/api/department/updateDepartment",o()({method:"POST",headers:{"Content-Type":"application/json"},data:a},i||{})));case 1:case"end":return t.stop()}},n)})),z.apply(this,arguments)}var H=e(36505),J=e(51042),X=e(82061),k=e(78565),q=e(66646),Y=e(71577),A=e(67294),ee=e(37476),L=e(5966),te=e(34994),ne=e(2453),c=e(85893);function re(n){var a=(0,A.useRef)(null);(0,A.useEffect)(function(){(0,v.pQ)().then(function(){if(n.detailData){var s;a==null||(s=a.current)===null||s===void 0||s.setFieldsValue(n.detailData)}else{var t;a==null||(t=a.current)===null||t===void 0||t.resetFields()}})},[n.detailData,n.visible]);var i=function(){var s=u()(r()().mark(function t(M){var F,w,S,b,W,U;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(w=M.departmentName,S=M.description,b=M.contact,W=M.contactPhone,U={id:(F=n.detailData)===null||F===void 0?void 0:F.id,contact:b,departmentName:w,contactPhone:W,description:S},!n.detailData){E.next=7;break}return E.next=5,Q(U);case 5:E.next=9;break;case 7:return E.next=9,h(U);case 9:return ne.ZP.success("\u4FDD\u5B58\u6210\u529F"),n.onClose(!0),E.abrupt("return",!0);case 12:case"end":return E.stop()}},t)}));return function(M){return s.apply(this,arguments)}}();return(0,c.jsxs)(ee.Y,{width:600,onFinish:i,formRef:a,modalProps:{destroyOnClose:!0,onCancel:function(){return n.onClose(!1)}},title:n.detailData?"\u4FEE\u6539\u90E8\u95E8":"\u65B0\u5EFA\u90E8\u95E8",open:n.visible,children:[(0,c.jsx)(L.Z,{name:"departmentName",label:"\u90E8\u95E8\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0\uFF01"}]}),(0,c.jsxs)(te.A.Group,{children:[(0,c.jsx)(L.Z,{name:"contact",label:"\u8054\u7CFB\u4EBA",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u540D\u79F0\uFF01"}]}),(0,c.jsx)(L.Z,{name:"contactPhone",label:"\u8054\u7CFB\u7535\u8BDD",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u540D\u79F0\uFF01"}]})]}),(0,c.jsx)(L.Z,{name:"description",label:"\u5907\u6CE8"})]})}var ae=function(){var n=(0,A.useRef)(null),a=(0,A.useState)([]),i=T()(a,2),s=i[0],t=i[1],M=(0,A.useState)(),F=T()(M,2),w=F[0],S=F[1],b=(0,A.useState)(!1),W=T()(b,2),U=W[0],x=W[1],E=[{title:"\u90E8\u95E8ID",dataIndex:"id",width:100,search:!1},{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"departmentName",width:100,render:function(P,C){return(0,c.jsx)("a",{onClick:function(){S(C),x(!0)},children:P})}},{title:"\u8054\u7CFB\u4EBA",dataIndex:"contact",width:100,search:!1},{title:"\u5907\u6CE8",dataIndex:"description",search:!1},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createdByDesc",width:100,search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt",width:150,search:!1}],se=function(){var B=u()(r()().mark(function P(){return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(s!=null&&s.length){R.next=2;break}return R.abrupt("return");case 2:(0,H.BB)("\u60A8\u786E\u5B9A\u5220\u9664".concat(s.length,"\u6761\u8BB0\u5F55\u5417"),u()(r()().mark(function D(){var G;return r()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,I(s);case 2:(G=n.current)===null||G===void 0||G.reload();case 3:case"end":return N.stop()}},D)})));case 3:case"end":return R.stop()}},P)}));return function(){return B.apply(this,arguments)}}();return(0,c.jsxs)(k._z,{children:[(0,c.jsx)(q.Z,{actionRef:n,rowKey:"id",request:u()(r()().mark(function B(){var P,C=arguments;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return P=C.length>0&&C[0]!==void 0?C[0]:{},D.t0=v.o1,D.next=4,V(P);case 4:return D.t1=D.sent,D.abrupt("return",(0,D.t0)(D.t1));case 6:case"end":return D.stop()}},B)})),toolBarRender:function(){return[(0,c.jsxs)(Y.ZP,{type:"primary",onClick:function(){S(void 0),x(!0)},children:[(0,c.jsx)(J.Z,{})," \u65B0\u5EFA"]},"primary"),(0,c.jsxs)(Y.ZP,{type:"primary",danger:!0,onClick:se,disabled:!(s!=null&&s.length),children:[(0,c.jsx)(X.Z,{})," \u5220\u9664"]},"primary")]},columns:E,rowSelection:{onChange:function(P){t(P)}}}),(0,c.jsx)(re,{detailData:w,onClose:function(P){var C;x(!1),P&&((C=n.current)===null||C===void 0||C.reload())},visible:U})]})}},36505:function(K,_,e){e.d(_,{BB:function(){return o}});var m=e(17061),r=e.n(m),g=e(17156),u=e.n(g),f=e(69400),T=function(h,l){notification.open({message:h,duration:null,description:l})},y=function(h,l){return h?(h=h.toLowerCase(),l=l.toLowerCase(),h.indexOf(l)>=0):!1};function o(v,h){return new Promise(function(l){var I=f.Z.confirm({centered:!0,title:v,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onCancel:function(){return l(!1)},onOk:function(){var d=u()(r()().mark(function O(){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return I.update({okButtonProps:{loading:!0}}),p.prev=1,p.next=4,h();case 4:l(!0),p.next=10;break;case 7:p.prev=7,p.t0=p.catch(1),l(!1);case 10:case"end":return p.stop()}},O,null,[[1,7]])}));function j(){return d.apply(this,arguments)}return j}()})})}}}]);
